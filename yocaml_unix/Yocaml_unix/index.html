<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Yocaml_unix (yocaml_unix.Yocaml_unix)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">yocaml_unix</a> &#x00BB; Yocaml_unix</nav><header class="odoc-preamble"><h1>Module <code><span>Yocaml_unix</span></code></h1><p>A runtime describes the set of &quot;low-level&quot; primitives to operate in a specific context. This separation allows to have a pure and platform agnostic kernel (the <code>Yocaml</code> module) and to define specific runtimes as needed. Here is the runtime for UNIXish (OSX/Linux).</p></header><nav class="odoc-toc"><ul><li><a href="#api">API</a></li><li><a href="#runtime">Runtime</a></li></ul></nav><div class="odoc-content"><h2 id="api"><a href="#api" class="anchor"></a>API</h2><div class="odoc-spec"><div class="spec value" id="val-execute" class="anchored"><a href="#val-execute" class="anchor"></a><code><span><span class="keyword">val</span> execute : <span><span><span class="type-var">'a</span> <a href="../../yocaml/Yocaml/Effect/index.html#type-t">Yocaml.Effect.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Executes a YOCaml program using the UNIX Runtime.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-serve" class="anchored"><a href="#val-serve" class="anchor"></a><code><span><span class="keyword">val</span> serve : <span>filepath:string <span class="arrow">&#45;&gt;</span></span> <span>port:int <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../yocaml/Yocaml/index.html#type-t">Yocaml.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Lwt</span>.t</span></span></code></div><div class="spec-doc"><p><code>serve ~filepath ~port engine</code> will serve, a bit like the sad python server, a static directory ... in addition, the function takes an OCaml program and re-executes it on every HTTP request that does not point to a 404. Very handy for continuous content development!</p></div></div><h2 id="runtime"><a href="#runtime" class="anchor"></a>Runtime</h2><p>Inclusion of the runtime to be able to use <code>Yocaml_unix</code> as runtime directly.</p><div class="odoc-include"><details><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../../yocaml/Yocaml/Runtime/module-type-RUNTIME/index.html">Yocaml.Runtime.RUNTIME</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="../../yocaml/Yocaml/Runtime/module-type-RUNTIME/index.html#type-t">t</a></span> = <span class="type-var">'a</span></span></span></code></summary><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bind" class="anchored"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-return" class="anchored"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-get_time" class="anchored"><a href="#val-get_time" class="anchor"></a><code><span><span class="keyword">val</span> get_time : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>float <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>get_time ()</code> should returns a float like <code>Unix.gettimeofday ()</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-file_exists" class="anchored"><a href="#val-file_exists" class="anchor"></a><code><span><span class="keyword">val</span> file_exists : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>file_exists path</code> should returns <code>true</code> if <code>path</code> exists (as a file or a directory), <code>false</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-target_exists" class="anchored"><a href="#val-target_exists" class="anchor"></a><code><span><span class="keyword">val</span> target_exists : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same of <code>file_exists</code> but acting on the target.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_directory" class="anchored"><a href="#val-is_directory" class="anchor"></a><code><span><span class="keyword">val</span> is_directory : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>is_directory path</code> should returns <code>true</code> if <code>path</code> is an existing file and if the file is a directory, <code>false</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_modification_time" class="anchored"><a href="#val-get_modification_time" class="anchor"></a><code><span><span class="keyword">val</span> get_modification_time : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="../../yocaml/Yocaml/Try/index.html#type-t">Yocaml.Try.t</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>get_modification_time path</code> should returns a <code>Try.t</code> containing the modification time (as an integer) of the given file. The function may fail.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-target_modification_time" class="anchored"><a href="#val-target_modification_time" class="anchor"></a><code><span><span class="keyword">val</span> target_modification_time : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="../../yocaml/Yocaml/Try/index.html#type-t">Yocaml.Try.t</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Same of <code>get_modification_time</code> but acting on the target.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_file" class="anchored"><a href="#val-read_file" class="anchor"></a><code><span><span class="keyword">val</span> read_file : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="../../yocaml/Yocaml/Try/index.html#type-t">Yocaml.Try.t</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>read_file path</code> should returns a <code>Try.t</code> containing the content (as a string) of the given file. The function may fail.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-content_changes" class="anchored"><a href="#val-content_changes" class="anchor"></a><code><span><span class="keyword">val</span> content_changes : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>bool <a href="../../yocaml/Yocaml/Try/index.html#type-t">Yocaml.Try.t</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>content_changes filepath new_content</code> check if the content of the file has been changed.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write_file" class="anchored"><a href="#val-write_file" class="anchor"></a><code><span><span class="keyword">val</span> write_file : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="../../yocaml/Yocaml/Try/index.html#type-t">Yocaml.Try.t</a></span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>write_file path content</code> should write (create or overwrite) <code>content</code> into the given path. The function may fail.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_dir" class="anchored"><a href="#val-read_dir" class="anchor"></a><code><span><span class="keyword">val</span> read_dir : <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> list</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>read_dir path</code> should returns a list of children. The function is pretty optimistic if the directory does not exist, or for any other possible reason the function should fail, it will return an empty list.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-create_dir" class="anchored"><a href="#val-create_dir" class="anchor"></a><code><span><span class="keyword">val</span> create_dir : <span>?file_perm:int <span class="arrow">&#45;&gt;</span></span> <span><a href="../../yocaml/Yocaml/Filepath/index.html#type-t">Yocaml.Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>create_dir path</code> is an optimistic version of <code>mkdir -p</code>, the function extract the directory of a file and create it if it does not exists without any failure.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-log" class="anchored"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <span><a href="../../yocaml/Yocaml/Log/index.html#type-level">Yocaml.Log.level</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>log level message</code> justs dump a message on stdout.</p></div></div></details></div></div></body></html>