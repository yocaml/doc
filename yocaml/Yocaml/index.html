<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Yocaml (yocaml.Yocaml)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">yocaml</a> &#x00BB; Yocaml</nav><header class="odoc-preamble"><h1>Module <code><span>Yocaml</span></code></h1><p>Here is the list of modules exposed by the YOCaml library. The concept behind this project is to offer, as a library, a set of tools to build pages. In other words, the end user, in this case me, would only have to build a new project in which Preface and YOCaml would be dependencies and then easily create his own static blog generator. It's likely that it won't be efficient or ergonomic, but it's a fun project to do in your spare time.</p><p>Please refer to <a href="../index.html#tutorial">the documentation index</a> for an example.</p></header><nav class="odoc-toc"><ul><li><a href="#build-system">Build system</a></li><li><a href="#handling">Handling</a><ul><li><a href="#effects-handling">Effects Handling</a></li><li><a href="#errors-handling">Errors Handling</a></li></ul></li><li><a href="#metadata">Metadata</a></li><li><a href="#rss-handling">RSS handling</a></li><li><a href="#utils">Utils</a></li><li><a href="#runtime">Runtime</a></li><li><a href="#included-general-stuff">Included general stuff</a><ul><li><a href="#included-common-util">Included common util</a></li><li><a href="#included-effect-plumbery">Included Effect plumbery</a></li></ul></li></ul></nav><div class="odoc-content"><h2 id="build-system"><a href="#build-system" class="anchor"></a>Build system</h2><p><code>Build</code> is the main module of <em>YOCaml</em>. It is used to describe rules attached to dependencies. A static site generator is a collection of ordered rules. (So it is probably not useful to use this project and it would be better to write everything with <code>make</code>, <code>sed</code> and <code>awk</code>).</p><div class="odoc-spec"><div class="spec module" id="module-Build" class="anchored"><a href="#module-Build" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Build/index.html">Build</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Description of a build rule.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Deps" class="anchored"><a href="#module-Deps" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Deps/index.html">Deps</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Deps</code> is an attempt to represent (without much effort) a set of dependencies to build a file.</p></div></div><h2 id="handling"><a href="#handling" class="anchor"></a>Handling</h2><h3 id="effects-handling"><a href="#effects-handling" class="anchor"></a>Effects Handling</h3><p>In order to take advantage of <a href="httsp://github.com/xvw/preface">Preface</a> (for fun and profit) YOCaml describes a list of effects to manage. As for errors, executable effects are centralised.</p><div class="odoc-spec"><div class="spec module" id="module-Effect" class="anchored"><a href="#module-Effect" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Effect/index.html">Effect</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Centralization of the effects that can be performed.</p></div></div><h3 id="errors-handling"><a href="#errors-handling" class="anchor"></a>Errors Handling</h3><p>Errors handling is mainly based on a biased version of <code>Result</code> and <code>Validation</code> offered by <a href="httsp://github.com/xvw/preface">Preface</a>.</p><div class="odoc-spec"><div class="spec module" id="module-Error" class="anchored"><a href="#module-Error" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Error/index.html">Error</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Describes the list of errors that can occur in the process of creating a blog.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Try" class="anchored"><a href="#module-Try" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Try/index.html">Try</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A specialised version of <code>Result</code> (with <a href="Error/index.html#type-t"><code>Error.t</code></a> as <code>Error</code> part). <code>Try</code> is very useful for producing sequential validations, where as soon as a step produces an error, the computation sequence is interrupted.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Validate" class="anchored"><a href="#module-Validate" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Validate/index.html">Validate</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A specialised version of <code>Validation</code> (with a nonempty list of <a href="Error/index.html#type-t"><code>Error.t</code></a> as <code>Invalid</code> part). <code>Validate</code> is very useful to produce parallel validations, where each error is accumulated, as opposed to <code>Try</code> which stops the computation at the first error.</p></div></div><h2 id="metadata"><a href="#metadata" class="anchor"></a>Metadata</h2><p>When we generate pages statically, we often want to be able to attach metadata to them to give the documents more context.</p><div class="odoc-spec"><div class="spec module" id="module-Date" class="anchored"><a href="#module-Date" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Date/index.html">Date</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Describes date (supposing naively that everything is in UTC).</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Metadata" class="anchored"><a href="#module-Metadata" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Metadata/index.html">Metadata</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Data structures attachable to articles/documents.</p></div></div><p>This module describes operations to query key-value objects abstractly. The <code>Yocaml_yaml</code> plugin is an example implementation of this protocol. (Or more precisely the module <a href="Key_value/Jsonm_object/index.html"><code>Yocaml.Key_value.Jsonm_object</code></a>).</p><div class="odoc-spec"><div class="spec module" id="module-Key_value" class="anchored"><a href="#module-Key_value" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Key_value/index.html">Key_value</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>To attach additional content to documents, <code>YOCaml</code> uses a Metadata mechanism. Generally, the formats used for this kind of metadata (<code>Yaml</code>, <code>JSON</code> or even <code>TOML</code>) can be abstractly represented as abstract objects, like a key-value table.</p></div></div><h2 id="rss-handling"><a href="#rss-handling" class="anchor"></a>RSS handling</h2><p>Deploying RSS feeds should be standard in all blogs. This is why minimal support for RSS is possible without using a plugin.</p><div class="odoc-spec"><div class="spec module" id="module-Rss" class="anchored"><a href="#module-Rss" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Rss/index.html">Rss</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A minimalist RSS2 representation.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Languages" class="anchored"><a href="#module-Languages" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Languages/index.html">Languages</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Deal with languages identifiers.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Mime" class="anchored"><a href="#module-Mime" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Mime/index.html">Mime</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An almost exhaustive list of MIME types extracted from <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types">MDN: Common MIME types</a></p></div></div><h2 id="utils"><a href="#utils" class="anchor"></a>Utils</h2><p>Useful tools for developing a YOCaml generator.</p><div class="odoc-spec"><div class="spec module" id="module-Filepath" class="anchored"><a href="#module-Filepath" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Filepath/index.html">Filepath</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>As <em>Wordpress</em> is mainly used to move files, having some functions to work with file names can be a very good idea!</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Log" class="anchored"><a href="#module-Log" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Log/index.html">Log</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Describing log-level.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Util" class="anchored"><a href="#module-Util" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Util/index.html">Util</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>An invasive but probably useful tooling.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Lexicon" class="anchored"><a href="#module-Lexicon" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Lexicon/index.html">Lexicon</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A centralisation of feedback messages.</p></div></div><h2 id="runtime"><a href="#runtime" class="anchor"></a>Runtime</h2><p>A YOCaml program is a pure application that has, a priori, no dependence on the operating system. These dependencies are provided when a program is run (as declared in the <code>yocaml_unix</code> package).</p><div class="odoc-spec"><div class="spec module" id="module-Runtime" class="anchored"><a href="#module-Runtime" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Runtime/index.html">Runtime</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Describes a dedicated runtime for varying the execution context of YOCaml.</p></div></div><h2 id="included-general-stuff"><a href="#included-general-stuff" class="anchor"></a>Included general stuff</h2><h3 id="included-common-util"><a href="#included-common-util" class="anchor"></a>Included common util</h3><p>There are always lots of little unreadable tools that I want to use... sometimes it improves readability... sometimes not.</p><div class="odoc-include"><details><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Util/index.html">Util</a></span></code></summary><h2 id="string-util_2"><a href="#string-util_2" class="anchor"></a>String util</h2><p>As I was not very serious... strings occupy a very large place in Wordpress... so it is necessary to be able to work correctly with them.</p><div class="odoc-spec"><div class="spec value" id="val-split_metadata" class="anchored"><a href="#val-split_metadata" class="anchor"></a><code><span><span class="keyword">val</span> split_metadata : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string option</span> * string</span></code></div></div><h2 id="infix-operators_2"><a href="#infix-operators_2" class="anchor"></a>Infix operators</h2><p>Even if sometimes, infix operators can seem unreadable... the immoderate use of Arrows has already made the code incomprehensible... so why deprive yourself?</p><div class="odoc-spec"><div class="spec value" id="val-($)" class="anchored"><a href="#val-($)" class="anchor"></a><code><span><span class="keyword">val</span> ($) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p><code>f $ x</code> is <code>f @@ x</code> which is <code>f x</code>... but I don't like <code>@@</code>.</p></div></div><h2 id="working-with-file-name_2"><a href="#working-with-file-name_2" class="anchor"></a>Working with file name</h2><div class="odoc-include"><details><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Filepath/index.html">Filepath</a></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-into" class="anchored"><a href="#val-into" class="anchor"></a><code><span><span class="keyword">val</span> into : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p><code>t |&gt; into dir</code> describes a <code>t</code> into a <code>dir</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-with_extension" class="anchored"><a href="#val-with_extension" class="anchor"></a><code><span><span class="keyword">val</span> with_extension : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>with_extension ext path</code> returns <code>true</code> if <code>path</code> ends with <code>ext</code> <code>false</code> otherwise, ie: <code>with_extension &quot;html&quot; &quot;index.html&quot;</code> returns <code>true</code> but <code>with_extenstion &quot;html&quot; &quot;foohtml&quot;</code> returns <code>false</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-basename" class="anchored"><a href="#val-basename" class="anchor"></a><code><span><span class="keyword">val</span> basename : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Keep the filename and remove the path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-add_extension" class="anchored"><a href="#val-add_extension" class="anchor"></a><code><span><span class="keyword">val</span> add_extension : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Add an extension to a t. For example: <code>add_extension &quot;index.txt&quot; &quot;html&quot;</code> will produce <code>&quot;index.txt.html&quot;</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-remove_extension" class="anchored"><a href="#val-remove_extension" class="anchor"></a><code><span><span class="keyword">val</span> remove_extension : <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Remove the extension of a path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-replace_extension" class="anchored"><a href="#val-replace_extension" class="anchor"></a><code><span><span class="keyword">val</span> replace_extension : <span>string <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> string</span></code></div><div class="spec-doc"><p>Replace the extension of a path.</p></div></div></details></div></details></div><h3 id="included-effect-plumbery"><a href="#included-effect-plumbery" class="anchor"></a>Included Effect plumbery</h3><p>A page generation process usually involves composing and executing effects, so rather than constantly forcing the <code>Effect</code> module into user space, the module is injected into the high-level API.</p><div class="odoc-include"><details><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Effect/index.html">Effect</a></span></code></summary><h2 id="a-bad-faith-preamble_2"><a href="#a-bad-faith-preamble_2" class="anchor"></a>A bad faith preamble</h2><p>To be beautiful and modern, this project separates the description of the programme from its interpretation. But as the composition is not really to my taste in Preface, I decided to centralize all the effects, like the errors, in one module.</p><p><em>Ugh</em>, that sounds perfectly stupid... it would be like considering that you can only express one family of effects (you could call it ... <code>IO</code>). Don't panic, the first parameter of type <code>effect</code> allows you to make a selective choice when defining <code>Freer</code>. One could say that one takes advantage of the <em>non-surjective</em> aspect of the constructors of a sum (thanks to the GADTs!). Well, I'd be lying if I said I was convinced it was a good approach, but at least it seems viable.</p><h2 id="effects-list_2"><a href="#effects-list_2" class="anchor"></a>Effects list</h2><p>Boy, this type sounds like a hell of a lot of trouble to read! don't read it and go a little lower, there are kind of smarts constructors.</p><div class="odoc-spec"><div class="spec type" id="type-effects" class="anchored"><a href="#type-effects" class="anchor"></a><code><span><span class="keyword">type</span> <span>(_, 'a) effects</span></span><span> = </span></code><table><tr id="type-effects.File_exists" class="anchored"><td class="def variant constructor"><a href="#type-effects.File_exists" class="anchor"></a><code><span>| </span><span><span class="constructor">File_exists</span> : <a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; file_exists : unit.. &gt;</span>, bool )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Target_exists" class="anchored"><td class="def variant constructor"><a href="#type-effects.Target_exists" class="anchor"></a><code><span>| </span><span><span class="constructor">Target_exists</span> : <a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; target_exists : unit.. &gt;</span>, bool )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Get_modification_time" class="anchored"><td class="def variant constructor"><a href="#type-effects.Get_modification_time" class="anchor"></a><code><span>| </span><span><span class="constructor">Get_modification_time</span> : <a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; get_modification_time : unit.. &gt;</span>,
                                        <span>int <a href="Try/index.html#type-t">Try.t</a></span> )</span>
                                        <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Target_modification_time" class="anchored"><td class="def variant constructor"><a href="#type-effects.Target_modification_time" class="anchor"></a><code><span>| </span><span><span class="constructor">Target_modification_time</span> : <a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; target_modification_time : unit.. &gt;</span>,
                                           <span>int <a href="Try/index.html#type-t">Try.t</a></span> )</span>
                                           <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Read_file" class="anchored"><td class="def variant constructor"><a href="#type-effects.Read_file" class="anchor"></a><code><span>| </span><span><span class="constructor">Read_file</span> : <a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; read_file : unit.. &gt;</span>, <span>string <a href="Try/index.html#type-t">Try.t</a></span> )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Content_changes" class="anchored"><td class="def variant constructor"><a href="#type-effects.Content_changes" class="anchor"></a><code><span>| </span><span><span class="constructor">Content_changes</span> : <span>(string * <a href="Filepath/index.html#type-t">Filepath.t</a>)</span> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; content_changes : unit.. &gt;</span>,
                                             <span><span><span>( string, unit )</span> <span class="xref-unresolved">Either</span>.t</span> <a href="Try/index.html#type-t">Try.t</a></span> )</span>
                                             <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Write_file" class="anchored"><td class="def variant constructor"><a href="#type-effects.Write_file" class="anchor"></a><code><span>| </span><span><span class="constructor">Write_file</span> : <span>(<a href="Filepath/index.html#type-t">Filepath.t</a> * string)</span> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; write_file : unit.. &gt;</span>, <span>unit <a href="Try/index.html#type-t">Try.t</a></span> )</span>
                                        <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Read_dir" class="anchored"><td class="def variant constructor"><a href="#type-effects.Read_dir" class="anchor"></a><code><span>| </span><span><span class="constructor">Read_dir</span> : <span>(<a href="Filepath/index.html#type-t">Filepath.t</a>
            * <span>[&lt; `Files <span>| `Directories</span> <span>| `Both</span> ]</span>
            * <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span>)</span> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; read_dir : unit.. &gt;</span>,
                                                   <span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> )</span>
                                                   <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Command" class="anchored"><td class="def variant constructor"><a href="#type-effects.Command" class="anchor"></a><code><span>| </span><span><span class="constructor">Command</span> : string <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; command : unit.. &gt;</span>, int )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Log" class="anchored"><td class="def variant constructor"><a href="#type-effects.Log" class="anchor"></a><code><span>| </span><span><span class="constructor">Log</span> : <span>(<a href="Log/index.html#type-level">Log.level</a> * string)</span> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; log : unit.. &gt;</span>, unit )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Throw" class="anchored"><td class="def variant constructor"><a href="#type-effects.Throw" class="anchor"></a><code><span>| </span><span><span class="constructor">Throw</span> : <a href="Error/index.html#type-t">Error.t</a> <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; throw : unit.. &gt;</span>, <span class="type-var">'a</span> )</span> <a href="#type-effects">effects</a></span></span></code></td></tr><tr id="type-effects.Raise" class="anchored"><td class="def variant constructor"><a href="#type-effects.Raise" class="anchor"></a><code><span>| </span><span><span class="constructor">Raise</span> : exn <span class="arrow">&#45;&gt;</span> <span><span>( <span>&lt; raise_ : unit.. &gt;</span>, <span class="type-var">'a</span> )</span> <a href="#type-effects">effects</a></span></span></code></td></tr></table></div></div><h2 id="global-definition_2"><a href="#global-definition_2" class="anchor"></a>Global definition</h2><p>Complete mechanism for describing programs by description and providing them with handlers (interpreters/runtime) for all effects modelled in type <code>t</code>. <em>(So absolutely not taking advantage of the slicing capability... It was well worth it!)</em></p><h3 id="freer-monad-over-effects_2"><a href="#freer-monad-over-effects_2" class="anchor"></a>Freer monad over effects</h3><p>All the plumbing for effects description/interpretation resides through a Freer monad (thanks Preface). Although this module is included below, I have taken the liberty of displaying it... for documentation purposes only.</p><div class="odoc-spec"><div class="spec module" id="module-Freer" class="anchored"><a href="#module-Freer" class="anchor"></a><code><span><span class="keyword">module</span> Freer</span><span> : 
  <span class="xref-unresolved">Preface</span>.Specs.FREER_MONAD
    <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">f</span></span> =
           <span><span>( <span>&lt; file_exists : <span class="xref-unresolved">unit</span>
             ; target_exists : <span class="xref-unresolved">unit</span>
             ; get_modification_time : <span class="xref-unresolved">unit</span>
             ; target_modification_time : <span class="xref-unresolved">unit</span>
             ; read_file : <span class="xref-unresolved">unit</span>
             ; write_file : <span class="xref-unresolved">unit</span>
             ; content_changes : <span class="xref-unresolved">unit</span>
             ; read_dir : <span class="xref-unresolved">unit</span>
             ; log : <span class="xref-unresolved">unit</span>
             ; command : <span class="xref-unresolved">unit</span>
             ; throw : <span class="xref-unresolved">unit</span>
             ; raise_ : <span class="xref-unresolved">unit</span> &gt;</span>,
             <span class="type-var">'a</span> )</span>
             <span class="xref-unresolved">effects</span></span></span></span></code></div></div><h3 id="performing-effects_2"><a href="#performing-effects_2" class="anchor"></a>Performing effects</h3><p>Once described (or/and specialised), the effects must be produced in a programme description. To transform the description of an effect (a value of type <code>Effect</code>.effect) into the execution of this effect, thus a value of type <a href="Effect/index.html#type-t"><code>Effect.t</code></a>), the <code>perform</code> function is used.</p><h4 id="filesystem_2"><a href="#filesystem_2" class="anchor"></a>Filesystem</h4><p>In generating a static blog, having control over the file system seems to be a minimum!</p><div class="odoc-spec"><div class="spec value" id="val-file_exists" class="anchored"><a href="#val-file_exists" class="anchor"></a><code><span><span class="keyword">val</span> file_exists : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>file_exists path</code> should be interpreted as returning <code>true</code> if the file denoted by the file path <code>path</code> exists, <code>false</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-target_exists" class="anchored"><a href="#val-target_exists" class="anchor"></a><code><span><span class="keyword">val</span> target_exists : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>bool <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>target_exists path</code> should be interpreted as returning <code>true</code> if the file denoted by the file path <code>path</code> exists, <code>false</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-get_modification_time" class="anchored"><a href="#val-get_modification_time" class="anchor"></a><code><span><span class="keyword">val</span> get_modification_time : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="Try/index.html#type-t">Try.t</a></span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>get_modification_time path</code> should be interpreted as returning, as an integer, the Unix time (<code>mtime</code> corresponding to the modification date of the file denoted by the file path <code>path</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-target_modification_time" class="anchored"><a href="#val-target_modification_time" class="anchor"></a><code><span><span class="keyword">val</span> target_modification_time : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>int <a href="Try/index.html#type-t">Try.t</a></span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>target_modification_time path</code> should be interpreted as returning, as an integer, the Unix time (<code>mtime</code> corresponding to the modification date of the file denoted by the file path <code>path</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_file" class="anchored"><a href="#val-read_file" class="anchor"></a><code><span><span class="keyword">val</span> read_file : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string <a href="Try/index.html#type-t">Try.t</a></span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>read_file path</code> should be interpreted as trying to read the contents of the file denoted by the file path <code>path</code>. At the moment I'm using strings mainly out of laziness, and as I'll probably be the only user of this library... it doesn't matter!</p></div></div><div class="odoc-spec"><div class="spec value" id="val-content_changes" class="anchored"><a href="#val-content_changes" class="anchor"></a><code><span><span class="keyword">val</span> content_changes : 
  <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>( string, unit )</span> <span class="xref-unresolved">Either</span>.t</span> <a href="Try/index.html#type-t">Try.t</a></span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>content_changes content filepath</code> should be interpreted as trying to check if the content of the file is different from the given content. (In order to reduce the mtime modification)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-write_file" class="anchored"><a href="#val-write_file" class="anchor"></a><code><span><span class="keyword">val</span> write_file : <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>unit <a href="Try/index.html#type-t">Try.t</a></span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>write_file path content</code> should be interpreted as trying to write <code>content</code> to the file denoted by the file path <code>path</code>. In my understanding of the system, the file will be completely overwritten if it already exists. Once again I am using strings, but this time it is not laziness, it is to be consistent with <code>read_file</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_children" class="anchored"><a href="#val-read_children" class="anchor"></a><code><span><span class="keyword">val</span> read_children : 
  <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Get a list of all children of a path.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_child_files" class="anchored"><a href="#val-read_child_files" class="anchor"></a><code><span><span class="keyword">val</span> read_child_files : 
  <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Get a list of all child files of a path (exclude dirs).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-read_child_directories" class="anchored"><a href="#val-read_child_directories" class="anchor"></a><code><span><span class="keyword">val</span> read_child_directories : 
  <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Get a list of all child directories of a path (exclude files).</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_children" class="anchored"><a href="#val-collect_children" class="anchor"></a><code><span><span class="keyword">val</span> collect_children : 
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Same of <code>read_children</code> but searching through a list of directories.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_child_files" class="anchored"><a href="#val-collect_child_files" class="anchor"></a><code><span><span class="keyword">val</span> collect_child_files : 
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Same of <code>read_child_files</code> but searching through a list of directories.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-collect_child_directories" class="anchored"><a href="#val-collect_child_directories" class="anchor"></a><code><span><span class="keyword">val</span> collect_child_directories : 
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Same of <code>read_child_directories</code> but searching through a list of directories.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-process_files" class="anchored"><a href="#val-process_files" class="anchor"></a><code><span><span class="keyword">val</span> process_files : 
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="xref-unresolved">Preface</span>.Predicate.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><a href="Filepath/index.html#type-t">Filepath.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>process_files path predicate action</code> performs sequentially <code>action</code> on each files which satisfies <code>predicate</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-command" class="anchored"><a href="#val-command" class="anchor"></a><code><span><span class="keyword">val</span> command : <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>command cmd</code> performs a <code>shell commands</code> and returns the exit code.</p></div></div><h4 id="logging_2"><a href="#logging_2" class="anchor"></a>Logging</h4><p>Even if it would be possible to limit our feedback with the user to simply returning an integer (<em>El famoso Unix Return</em>)... it would still be more convenient to display feedback to the user on the stage the program is in, right?</p><div class="odoc-spec"><div class="spec value" id="val-log" class="anchored"><a href="#val-log" class="anchor"></a><code><span><span class="keyword">val</span> log : <span><a href="Log/index.html#type-level">Log.level</a> <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>log level message</code> should be interpreted as writing (probably to standard output) a message associated with a log level. To look good, the colour should change according to the log level, it would look more professional!</p></div></div><div class="odoc-spec"><div class="spec value" id="val-trace" class="anchored"><a href="#val-trace" class="anchor"></a><code><span><span class="keyword">val</span> trace : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>trace message</code> is an alias of <code>log Aliases.Trace</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-debug" class="anchored"><a href="#val-debug" class="anchor"></a><code><span><span class="keyword">val</span> debug : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>debug message</code> is an alias of <code>log Aliases.Debug</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-info" class="anchored"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>info message</code> is an alias of <code>log Aliases.Info</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-warning" class="anchored"><a href="#val-warning" class="anchor"></a><code><span><span class="keyword">val</span> warning : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>warning message</code> is an alias of <code>log Aliases.Warning</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-alert" class="anchored"><a href="#val-alert" class="anchor"></a><code><span><span class="keyword">val</span> alert : <span>string <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>alert message</code> is an alias of <code>log Aliases.Alert</code>.</p></div></div><h4 id="open-bar_2"><a href="#open-bar_2" class="anchor"></a>Open bar</h4><p>When we are in the context of an IO, ahem, effect execution, it's open bar, we can do whatever we want, like throwing exceptions galore!</p><div class="odoc-spec"><div class="spec value" id="val-throw" class="anchored"><a href="#val-throw" class="anchor"></a><code><span><span class="keyword">val</span> throw : <span><a href="Error/index.html#type-t">Error.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>throw error</code> should be interpreted as... &quot;fire, fire, what to do using an Error!&quot;.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-raise_" class="anchored"><a href="#val-raise_" class="anchor"></a><code><span><span class="keyword">val</span> raise_ : <span>exn <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p><code>raise_ exn</code> should be interpreted as... &quot;fire, fire, what to do using an exception!&quot;.</p></div></div><h4 id="effects-composition_2"><a href="#effects-composition_2" class="anchor"></a>Effects composition</h4><div class="odoc-spec"><div class="spec value" id="val-sequence" class="anchored"><a href="#val-sequence" class="anchor"></a><code><span><span class="keyword">val</span> sequence : 
  <span><span><span><span class="type-var">'a</span> list</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div><div class="spec-doc"><p>Collapses sequentially YOCaml program. <code>sequence ps f p</code> produces a program which performs <code>p</code> followed by <code>f ps</code>. A common usage is <code>p |&gt; sequences ps f</code>.</p></div></div><h3 id="included-freer-combinators_2"><a href="#included-freer-combinators_2" class="anchor"></a>Included Freer combinators</h3><p>As mentioned above, the plumbing of program description and program handling is provided through a Freer Monad, a technique that aims to describe a free build over a Left Kan extension. Although the presence of <em>slicing</em> allows for the construction of specialised effects handlers, in the use case of this blog generator, the effects I propagate turn out to be exactly those I have described in my complete effects list. Coicindance, I don't think so!</p><p>It therefore seems logical (not to say ergonomic) to introduce the Freer interface in the toplevel of the <code>Effect</code> module. But as the interface is long and tiring to read, I place it at the end of the module!</p><div class="odoc-spec"><div class="spec module" id="module-Infix" class="anchored"><a href="#module-Infix" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Infix/index.html">Infix</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Syntax" class="anchored"><a href="#module-Syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Syntax/index.html">Syntax</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Preface</span>.Specs.FREER_MONAD
  <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">f</span></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.f</span></span>
   <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span>
   <span class="keyword">and</span> <span><span class="keyword">module</span> <span class="xref-unresolved">Infix</span> := <span class="xref-unresolved">Freer</span>.Infix</span>
   <span class="keyword">and</span> <span><span class="keyword">module</span> <span class="xref-unresolved">Syntax</span> := <span class="xref-unresolved">Freer</span>.Syntax</span></span></code></summary><div class="odoc-spec"><div class="spec type" id="type-f" class="anchored"><a href="#type-f" class="anchor"></a><code><span><span class="keyword">type</span> <span>!'a f</span></span><span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.f</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>!'a t</span></span><span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span><span> = </span></code><table><tr id="type-t.Return" class="anchored"><td class="def variant constructor"><a href="#type-t.Return" class="anchor"></a><code><span>| </span><span><span class="constructor">Return</span> : <span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></td></tr><tr id="type-t.Bind" class="anchored"><td class="def variant constructor"><a href="#type-t.Bind" class="anchor"></a><code><span>| </span><span><span class="constructor">Bind</span> : <span><span class="type-var">'c</span> <a href="#type-f">f</a></span> * <span>( <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'d</span> <a href="#type-t">t</a></span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-handle" class="anchored"><a href="#type-handle" class="anchor"></a><code><span><span class="keyword">type</span> <span>(!'a, !'b) handle</span></span><span> = <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-f">f</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-handler" class="anchored"><a href="#type-handler" class="anchor"></a><code><span><span class="keyword">type</span> <span>!'a handler</span></span><span> = </span><span>{</span></code><table><tr id="type-handler.handler" class="anchored"><td class="def record field"><a href="#type-handler.handler" class="anchor"></a><code><span>handler : 'b. <span><span>( <span class="type-var">'b</span>, <span class="type-var">'a</span> )</span> <a href="#type-handle">handle</a></span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-perform" class="anchored"><a href="#val-perform" class="anchor"></a><code><span><span class="keyword">val</span> perform : <span><span><span class="type-var">'a</span> <a href="#type-f">f</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-run" class="anchored"><a href="#val-run" class="anchor"></a><code><span><span class="keyword">val</span> run : <span><span><span class="type-var">'a</span> <a href="#type-handler">handler</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-To_monad" class="anchored"><a href="#module-To_monad" class="anchor"></a><code><span><span class="keyword">module</span> <a href="To_monad/index.html">To_monad</a></span><span> (<a href="To_monad/index.html#argument-1-Monad">Monad</a> : <span class="xref-unresolved">Preface_specs__</span>.Monad.CORE) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Functor" class="anchored"><a href="#module-Functor" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Functor/index.html">Functor</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Applicative" class="anchored"><a href="#module-Applicative" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Applicative/index.html">Applicative</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Selective" class="anchored"><a href="#module-Selective" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Selective/index.html">Selective</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Monad" class="anchored"><a href="#module-Monad" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Monad/index.html">Monad</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-bind" class="anchored"><a href="#val-bind" class="anchor"></a><code><span><span class="keyword">val</span> bind : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-map" class="anchored"><a href="#val-map" class="anchor"></a><code><span><span class="keyword">val</span> map : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-join" class="anchored"><a href="#val-join" class="anchor"></a><code><span><span class="keyword">val</span> join : <span><span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-return" class="anchored"><a href="#val-return" class="anchor"></a><code><span><span class="keyword">val</span> return : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compose_left_to_right" class="anchored"><a href="#val-compose_left_to_right" class="anchor"></a><code><span><span class="keyword">val</span> compose_left_to_right : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compose_right_to_left" class="anchored"><a href="#val-compose_right_to_left" class="anchor"></a><code><span><span class="keyword">val</span> compose_right_to_left : <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lift" class="anchored"><a href="#val-lift" class="anchor"></a><code><span><span class="keyword">val</span> lift : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lift2" class="anchored"><a href="#val-lift2" class="anchor"></a><code><span><span class="keyword">val</span> lift2 : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'c</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lift3" class="anchored"><a href="#val-lift3" class="anchor"></a><code><span><span class="keyword">val</span> lift3 : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'d</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'c</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'d</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-replace" class="anchored"><a href="#val-replace" class="anchor"></a><code><span><span class="keyword">val</span> replace : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-void" class="anchored"><a href="#val-void" class="anchor"></a><code><span><span class="keyword">val</span> void : <span><span><span class="type-var">'a</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="#type-t">t</a></span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec module" id="module-Traverse" class="anchored"><a href="#module-Traverse" class="anchor"></a><code><span><span class="keyword">module</span> Traverse</span><span> : 
  <span class="xref-unresolved">Preface</span>.Specs.TRAVERSABLE
    <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">iter</span></span> = <span><span class="type-var">'a</span> <span class="xref-unresolved">list</span></span></span></span></code></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Infix/index.html">Infix</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="Infix/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Preface</span>.Specs.Applicative.INFIX <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-(&lt;*&gt;)" class="anchored"><a href="#val-(&lt;*&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;*&gt;) : <span><span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;**&gt;)" class="anchored"><a href="#val-(&lt;**&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;**&gt;) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(*&gt;)" class="anchored"><a href="#val-(*&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (*&gt;) : <span><span>unit <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;*)" class="anchored"><a href="#val-(&lt;*)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;*) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Preface</span>.Specs.Monad.INFIX <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-(=|&lt;)" class="anchored"><a href="#val-(=|&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (=|&lt;) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;|=)" class="anchored"><a href="#val-(&gt;|=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;|=) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;&gt;=)" class="anchored"><a href="#val-(&gt;&gt;=)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;=) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(=&lt;&lt;)" class="anchored"><a href="#val-(=&lt;&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (=&lt;&lt;) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;=&gt;)" class="anchored"><a href="#val-(&gt;=&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;=&gt;) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;=&lt;)" class="anchored"><a href="#val-(&lt;=&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;=&lt;) : <span><span>( <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'c</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&gt;&gt;)" class="anchored"><a href="#val-(&gt;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&gt;&gt;) : <span><span>unit <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;&lt;)" class="anchored"><a href="#val-(&lt;&lt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;&lt;) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>unit <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;$&gt;)" class="anchored"><a href="#val-(&lt;$&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;$&gt;) : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;&amp;&gt;)" class="anchored"><a href="#val-(&lt;&amp;&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;&amp;&gt;) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-(&lt;$)" class="anchored"><a href="#val-(&lt;$)" class="anchor"></a><code><span><span class="keyword">val</span> (&lt;$) : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-($&gt;)" class="anchored"><a href="#val-($&gt;)" class="anchor"></a><code><span><span class="keyword">val</span> ($&gt;) : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div></details></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="keyword">module</span> <span class="keyword">type</span> <span class="keyword">of</span> <a href="Syntax/index.html">Syntax</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <a href="Syntax/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Preface</span>.Specs.Applicative.SYNTAX <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-and+" class="anchored"><a href="#val-and+" class="anchor"></a><code><span><span class="keyword">val</span> and+ : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Preface</span>.Specs.Monad.SYNTAX <span class="keyword">with</span> <span><span class="keyword">type</span> <span>'a <span class="xref-unresolved">t</span></span> := <span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value" id="val-let*" class="anchored"><a href="#val-let*" class="anchor"></a><code><span><span class="keyword">val</span> let* : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-let+" class="anchored"><a href="#val-let+" class="anchor"></a><code><span><span class="keyword">val</span> let+ : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Freer</span>.t</span> <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'b</span> <span class="xref-unresolved">Freer</span>.t</span></span></code></div></div></details></div></details></div></details></div></div></body></html>